<configuration scan="true" scanPeriod="10 seconds">

	<property name="LOGS_DIR" value="/ies-logs/" />
    <property name="PATTERN" value="%d{HH:mm:ss.SSS} %-5level [%logger{0}] %msg%n%ex{full}" />
    <property name="SERVER_LOG_FILE" value="server" />
    <property name="SYSTEM_FILE" value="system" />
    <property name="MOVILE_PATTERN" value="[%-5p] [%d{ISO8601}] %msg%n%ex{full}" />

	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>${PATTERN}</pattern>
		</encoder>
	</appender>

	<appender name="SERVER_LOG" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<!-- deny all events with a level below INFO, that is TRACE and DEBUG
		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
			<level>INFO</level>
		</filter>
		 -->

		<file>${LOGS_DIR}${SERVER_LOG_FILE}.log</file>
		<append>true</append>
		<encoder>
			<pattern>${PATTERN}</pattern>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- daily rollover -->
			<fileNamePattern>${LOGS_DIR}${SERVER_LOG_FILE}.%d{yyyy-MM-dd}.gz</fileNamePattern>
			<!-- keep 30 days' worth of history -->
			<maxHistory>30</maxHistory>
		</rollingPolicy>
	</appender>
	
	<appender name="MOVILE_SYSTEM" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOGS_DIR}${SYSTEM_FILE}.log</file>
        <append>true</append>
        <encoder>
            <pattern>${MOVILE_PATTERN}</pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- daily rollover -->
            <fileNamePattern>${LOGS_DIR}${SYSTEM_FILE}.%d{yyyy-MM-dd}.gz</fileNamePattern>
            <!-- keep 30 days' worth of history -->
            <maxHistory>30</maxHistory>
        </rollingPolicy>
    </appender>
    
    <logger name="system" level="INFO">
    	<appender-ref ref="MOVILE_SYSTEM_PERFORMED"/>
    </logger>
    
	<root level="INFO">
		<appender-ref ref="SERVER_LOG" />
		<appender-ref ref="STDOUT" />
	</root>

</configuration>